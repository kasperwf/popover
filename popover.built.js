(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Popover = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var assign=require("lodash.assign"),extend=function(t){var r,o=this,n=[].slice.call(arguments);r=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return o.apply(this,arguments)},assign(r,o);var s=function(){this.constructor=r};return s.prototype=o.prototype,r.prototype=new s,t&&(n.unshift(r.prototype),assign.apply(null,n)),r.__super__=o.prototype,r};module.exports=extend;


},{"lodash.assign":12}],2:[function(require,module,exports){
function now(){return(new Date).getTime()}module.exports=Date.now||now;


},{}],3:[function(require,module,exports){
var now=require("date-now");module.exports=function(n,u,t){function e(){var p=now()-a;u>p&&p>0?l=setTimeout(e,u-p):(l=null,t||(i=n.apply(r,o),l||(r=o=null)))}var l,o,r,a,i;return null==u&&(u=100),function(){r=this,o=arguments,a=now();var p=t&&!l;return l||(l=setTimeout(e,u)),p&&(i=n.apply(r,o),r=o=null),i}};


},{"date-now":2}],4:[function(require,module,exports){
function parse(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var a=/<([\w:]+)/.exec(e);if(!a)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=a[1];if("body"==r){var l=t.createElement("html");return l.innerHTML=e,l.removeChild(l.lastChild)}var i=map[r]||map._default,p=i[0],o=i[1],n=i[2],l=t.createElement("div");for(l.innerHTML=o+e+n;p--;)l=l.lastChild;if(l.firstChild==l.lastChild)return l.removeChild(l.firstChild);for(var d=t.createDocumentFragment();l.firstChild;)d.appendChild(l.removeChild(l.firstChild));return d}module.exports=parse;var innerHTMLBug=!1,bugTestDiv;"undefined"!=typeof document&&(bugTestDiv=document.createElement("div"),bugTestDiv.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',innerHTMLBug=!bugTestDiv.getElementsByTagName("link").length,bugTestDiv=void 0);var map={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:innerHTMLBug?[1,"X<div>","</div>"]:[0,"",""]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"],map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"],map.polyline=map.ellipse=map.polygon=map.circle=map.text=map.line=map.path=map.rect=map.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];


},{}],5:[function(require,module,exports){
function Emitter(t){return t?mixin(t):void 0}function mixin(t){for(var e in Emitter.prototype)t[e]=Emitter.prototype[e];return t}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},Emitter.prototype.once=function(t,e){function i(){r.off(t,i),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,s=0;s<i.length;s++)if(r=i[s],r===e||r.fn===e){i.splice(s,1);break}return this},Emitter.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var r=0,s=i.length;s>r;++r)i[r].apply(this,e)}return this},Emitter.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},Emitter.prototype.hasListeners=function(t){return!!this.listeners(t).length};


},{}],6:[function(require,module,exports){
function baseAssign(e,s){return null==s?e:baseCopy(s,keys(s),e)}var baseCopy=require("lodash._basecopy"),keys=require("lodash.keys");module.exports=baseAssign;


},{"lodash._basecopy":7,"lodash.keys":15}],7:[function(require,module,exports){
function baseCopy(e,o,r){r||(r={});for(var a=-1,n=o.length;++a<n;){var t=o[a];r[t]=e[t]}return r}module.exports=baseCopy;


},{}],8:[function(require,module,exports){
function bindCallback(n,t,r){if("function"!=typeof n)return identity;if(void 0===t)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,c){return n.call(t,r,e,u,c)};case 5:return function(r,e,u,c,i){return n.call(t,r,e,u,c,i)}}return function(){return n.apply(t,arguments)}}function identity(n){return n}module.exports=bindCallback;


},{}],9:[function(require,module,exports){
function createAssigner(e){return restParam(function(r,a){var i=-1,t=null==r?0:a.length,l=t>2?a[t-2]:void 0,n=t>2?a[2]:void 0,o=t>1?a[t-1]:void 0;for("function"==typeof l?(l=bindCallback(l,o,5),t-=2):(l="function"==typeof o?o:void 0,t-=l?1:0),n&&isIterateeCall(a[0],a[1],n)&&(l=3>t?void 0:l,t=1);++i<t;){var s=a[i];s&&e(r,s,l)}return r})}var bindCallback=require("lodash._bindcallback"),isIterateeCall=require("lodash._isiterateecall"),restParam=require("lodash.restparam");module.exports=createAssigner;


},{"lodash._bindcallback":8,"lodash._isiterateecall":11,"lodash.restparam":16}],10:[function(require,module,exports){
function isObjectLike(t){return!!t&&"object"==typeof t}function getNative(t,o){var e=null==t?void 0:t[o];return isNative(e)?e:void 0}function isFunction(t){return isObject(t)&&objToString.call(t)==funcTag}function isObject(t){var o=typeof t;return!!t&&("object"==o||"function"==o)}function isNative(t){return null==t?!1:isFunction(t)?reIsNative.test(fnToString.call(t)):isObjectLike(t)&&reIsHostCtor.test(t)}var funcTag="[object Function]",reIsHostCtor=/^\[object .+?Constructor\]$/,objectProto=Object.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");module.exports=getNative;


},{}],11:[function(require,module,exports){
function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function isArrayLike(e){return null!=e&&isLength(getLength(e))}function isIndex(e,t){return e="number"==typeof e||reIsUint.test(e)?+e:-1,t=null==t?MAX_SAFE_INTEGER:t,e>-1&&e%1==0&&t>e}function isIterateeCall(e,t,n){if(!isObject(n))return!1;var r=typeof t;if("number"==r?isArrayLike(n)&&isIndex(t,n.length):"string"==r&&t in n){var i=n[t];return e===e?e===i:i!==i}return!1}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&MAX_SAFE_INTEGER>=e}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var reIsUint=/^\d+$/,MAX_SAFE_INTEGER=9007199254740991,getLength=baseProperty("length");module.exports=isIterateeCall;


},{}],12:[function(require,module,exports){
function assignWith(s,e,r){for(var i=-1,a=keys(e),n=a.length;++i<n;){var g=a[i],t=s[g],o=r(t,e[g],g,s,e);(o===o?o===t:t!==t)&&(void 0!==t||g in s)||(s[g]=o)}return s}var baseAssign=require("lodash._baseassign"),createAssigner=require("lodash._createassigner"),keys=require("lodash.keys"),assign=createAssigner(function(s,e,r){return r?assignWith(s,e,r):baseAssign(s,e)});module.exports=assign;


},{"lodash._baseassign":6,"lodash._createassigner":9,"lodash.keys":15}],13:[function(require,module,exports){
function baseProperty(t){return function(e){return null==e?void 0:e[t]}}function isArguments(t){return isArrayLikeObject(t)&&hasOwnProperty.call(t,"callee")&&(!propertyIsEnumerable.call(t,"callee")||objectToString.call(t)==argsTag)}function isArrayLike(t){return null!=t&&isLength(getLength(t))&&!isFunction(t)}function isArrayLikeObject(t){return isObjectLike(t)&&isArrayLike(t)}function isFunction(t){var e=isObject(t)?objectToString.call(t):"";return e==funcTag||e==genTag}function isLength(t){return"number"==typeof t&&t>-1&&t%1==0&&MAX_SAFE_INTEGER>=t}function isObject(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function isObjectLike(t){return!!t&&"object"==typeof t}var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,propertyIsEnumerable=objectProto.propertyIsEnumerable,getLength=baseProperty("length");module.exports=isArguments;


},{}],14:[function(require,module,exports){
function isObjectLike(t){return!!t&&"object"==typeof t}function getNative(t,r){var e=null==t?void 0:t[r];return isNative(e)?e:void 0}function isLength(t){return"number"==typeof t&&t>-1&&t%1==0&&MAX_SAFE_INTEGER>=t}function isFunction(t){return isObject(t)&&objToString.call(t)==funcTag}function isObject(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function isNative(t){return null==t?!1:isFunction(t)?reIsNative.test(fnToString.call(t)):isObjectLike(t)&&reIsHostCtor.test(t)}var arrayTag="[object Array]",funcTag="[object Function]",reIsHostCtor=/^\[object .+?Constructor\]$/,objectProto=Object.prototype,fnToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objToString=objectProto.toString,reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nativeIsArray=getNative(Array,"isArray"),MAX_SAFE_INTEGER=9007199254740991,isArray=nativeIsArray||function(t){return isObjectLike(t)&&isLength(t.length)&&objToString.call(t)==arrayTag};module.exports=isArray;


},{}],15:[function(require,module,exports){
function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function isArrayLike(e){return null!=e&&isLength(getLength(e))}function isIndex(e,t){return e="number"==typeof e||reIsUint.test(e)?+e:-1,t=null==t?MAX_SAFE_INTEGER:t,e>-1&&e%1==0&&t>e}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&MAX_SAFE_INTEGER>=e}function shimKeys(e){for(var t=keysIn(e),r=t.length,n=r&&e.length,s=!!n&&isLength(n)&&(isArray(e)||isArguments(e)),o=-1,i=[];++o<r;){var u=t[o];(s&&isIndex(u,n)||hasOwnProperty.call(e,u))&&i.push(u)}return i}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function keysIn(e){if(null==e)return[];isObject(e)||(e=Object(e));var t=e.length;t=t&&isLength(t)&&(isArray(e)||isArguments(e))&&t||0;for(var r=e.constructor,n=-1,s="function"==typeof r&&r.prototype===e,o=Array(t),i=t>0;++n<t;)o[n]=n+"";for(var u in e)i&&isIndex(u,t)||"constructor"==u&&(s||!hasOwnProperty.call(e,u))||o.push(u);return o}var getNative=require("lodash._getnative"),isArguments=require("lodash.isarguments"),isArray=require("lodash.isarray"),reIsUint=/^\d+$/,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeKeys=getNative(Object,"keys"),MAX_SAFE_INTEGER=9007199254740991,getLength=baseProperty("length"),keys=nativeKeys?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&isArrayLike(e)?shimKeys(e):isObject(e)?nativeKeys(e):[]}:shimKeys;module.exports=keys;


},{"lodash._getnative":10,"lodash.isarguments":13,"lodash.isarray":14}],16:[function(require,module,exports){
function restParam(r,t){if("function"!=typeof r)throw new TypeError(FUNC_ERROR_TEXT);return t=nativeMax(void 0===t?r.length-1:+t||0,0),function(){for(var a=arguments,e=-1,n=nativeMax(a.length-t,0),i=Array(n);++e<n;)i[e]=a[t+e];switch(t){case 0:return r.call(this,i);case 1:return r.call(this,a[0],i);case 2:return r.call(this,a[0],a[1],i)}var c=Array(t+1);for(e=-1;++e<t;)c[e]=a[e];return c[t]=i,r.apply(this,c)}}var FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max;module.exports=restParam;


},{}],17:[function(require,module,exports){
"use strict";function Popover(t){if(!(this instanceof Popover))return new Popover(t);Emitter.call(this),this.opts=t||{},this.el=domify("string"==typeof t.template?t.template:template);var o=this.opts.className?this.opts.className.split(" "):[];o.forEach(function(t){this.el.classList.add(t)},this),t.button&&this.setButton(this.opts.button),this.initialize.apply(this,arguments)}var domify=require("domify"),debounce=require("debounce"),Emitter=require("emitter-component"),template='<div class="popover">\n  <div class="popover-arrow"></div>\n  <div class="popover-content"></div>\n</div>',extend=require("ampersand-class-extend");module.exports=Popover,Emitter(Popover.prototype),Popover.extend=extend,Popover.prototype.initialize=function(){},Popover.prototype.show=Popover.prototype.render=function(t){var o=this;return document.body.appendChild(this.el),this.opts.position=this.opts.position||"right",this.position(this.opts.position),requestAnimationFrame(function(){o.el.classList.add(t||"show"),o.emit("shown")}),this._listenOnResize(),this},Popover.prototype.destroy=Popover.prototype.remove=function(){this.button=null,this.el.parentNode.removeChild(this.el),this.emit("removed"),this.off(),window.removeEventListener("resize",this._resizeListener,!1)},Popover.prototype.setContent=function(t){return t="string"==typeof t?domify(t):t,this.el.querySelector(".popover-content").appendChild(t),this},Popover.prototype.setButton=function(t){return t="string"==typeof t?document.querySelector(t):t,this.button=t,this.buttonCoords=this.button.getBoundingClientRect(),this},Popover.prototype.position=function(t){var o,e;return this.el.classList.add("popover-"+t),this._rect=this.el.getBoundingClientRect(),"top"!==t&&"bottom"!==t||(o=this._calculateX(),e="top"===t?this.buttonCoords.top-this._rect.height:this.buttonCoords.top+this.buttonCoords.height,this.el.style[this.opts.align||"left"]=o+(window.scrollX||window.pageXOffset)+"px",this.el.style.top=e+(window.scrollY||window.pageYOffset)+"px",this._positionArrow("left",this.el.getBoundingClientRect().left)),"right"!==t&&"left"!==t||(o="right"===t?this.buttonCoords.left+this.buttonCoords.width:this.buttonCoords.left-this._rect.width,e=this._calculateY(),this.el.style.left=o+(window.scrollX||window.pageXOffset)+"px",this.el.style.top=e+(window.scrollY||window.pageYOffset)+"px",this._positionArrow("top",e)),this},Popover.prototype._listenOnResize=function(){var t=this;this._resizeListener=debounce(function(){t.buttonCoords=t.button.getBoundingClientRect(),t.position(t.opts.position)},100),window.addEventListener("resize",this._resizeListener,!1)},Popover.prototype._positionArrow=function(t,o){var e=this.el.querySelector(".popover-arrow");if(e){var i="top"===t?"height":"width",s=this.buttonCoords[t]+this.buttonCoords[i]/2-o;e.style[t]=Math.round(s)+"px"}},Popover.prototype._calculateY=function(){this._rect||(this._rect=this.el.getBoundingClientRect());var t=this._rect.height,o=this.buttonCoords.top+(this.buttonCoords.height-t)/2;return this._autoAlign(o),"top"===this.opts.align&&(o=this.buttonCoords.top),o},Popover.prototype._calculateX=function(){this._rect||(this._rect=this.el.getBoundingClientRect());var t=this._rect.width,o=this.buttonCoords.left+(this.buttonCoords.width-t)/2;return this._autoAlign(o),"left"===this.opts.align&&(o=this.buttonCoords.left),"right"===this.opts.align&&(o=window.innerWidth-(this.buttonCoords.left+this.buttonCoords.width)),o},Popover.prototype._autoAlign=function(t){this._rect||(this._rect=this.el.getBoundingClientRect());var o=this._rect.width,e=this.opts.position,i="top"===e||"bottom"===e;return i&&t+o>window.innerWidth&&(this.opts.align="right"),i&&0>t&&(this.opts.align="left"),!i&&0>t&&(this.opts.align="top"),this};
},{"ampersand-class-extend":1,"debounce":3,"domify":4,"emitter-component":5}]},{},[17])(17)
});